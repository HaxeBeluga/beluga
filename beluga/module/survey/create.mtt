<!DOCTYPE HTML>
<html>
	<head>
		<title>Title of Survey</title>
		<link href="./style.css" type="text/css" rel="stylesheet">
	</head>
	<body>
		<div id="mainDiv">
			<h1>Creation of new survey</h1>
			<form action="index.php" method="POST" id="survey_form">
				<div id="titleDiv" class="bottom">
					<label>Survey name</label>
					<input type="text" name="surveyName" value=""/>
				</div>
				<div id="divChoices">
					<div id="choices" class="bottom">
						<div id="1" class="bottom">
							<label>Survey choice name</label>
							<input name="surveyOption" type="text" name="survey_name" class="entry" value=""/>
							<br/>
						</div>
					</div>
					<a id="addEntry" type="button" class="btn" onclick="addEntry();">Add entry</a>
				</div>
				<p id="error"></p>
				<a class="btn" onclick="sendSurvey();">Send</a>
			</form>
		</div>
		<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
		<script type="text/javascript">
		function addEntry(){
			var tmp = $("#choices").children().size();
			
			<!-- I put a limit of suggestions -->
			if (tmp > 20)
				return;
			tmp = $("#1").html();
			
			tmp = "<div id=\"1\" class=\"bottom\">" + tmp + "</div>";
			$("#choices").append(tmp);
		}
		function sendSurvey(){
			var arr = new Array();
			var dataToSend = document.getElementsByName('surveyName').item(0).value;
			var done = 0;

			if (dataToSend == ""){
				$("#error").text("Missing survey's name");
				return;
			}
			dataToSend = "name=" + dataToSend;
			$("#error").text("");
			
			arr = document.getElementsByName('surveyOption');
			for (var i = 0; i < arr.length; i++){
				var obj1 = arr.item(i);
				
				if (obj1.value != ""){
					dataToSend = dataToSend + "&option " + i + "=" + obj1.value;
					done = done + 1;
				}
			}
			if (done < 2){
				$("#error").text("Please enter at least two options");
				return;
			}
			dataToSend = $("#survey_form").attr('action') + "?" + dataToSend;
			window.location = dataToSend;
		}
		addEntry();
		</script>
	</body>
</html>